{% include 'header.phtml' %}
<script type="text/javascript" src="/melarossa/scripts/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="/melarossa/scripts/jquery-ui-1.8.17.custom.min.js"></script>
<script type="text/javascript" src="/melarossa/scripts/jspdf.js"></script>
<script type="text/javascript" src="/melarossa/scripts/Deflate/adler32cs.js"></script>
<script type="text/javascript" src="/melarossa/scripts/FileSaver.js/FileSaver.js"></script>
<script type="text/javascript" src="/melarossa/scripts/Blob.js/BlobBuilder.js"></script>

<script type="text/javascript" src="/melarossa/scripts/jspdf.plugin.addimage.js"></script>

<script type="text/javascript" src="/melarossa/scripts/jspdf.plugin.standard_fonts_metrics.js"></script>
<script type="text/javascript" src="/melarossa/scripts/jspdf.plugin.split_text_to_size.js"></script>
<script type="text/javascript" src="/melarossa/scripts/jspdf.plugin.from_html.js"></script>
<script type="text/javascript" src="/melarossa/scripts/basic.js"></script>

<script type="text/javascript">
    function pdf() {
        var doc = new jsPDF();

// We'll make our own renderer to skip this editor
        var specialElementHandlers = {
            '#editor': function(element, renderer) {
                return true;
            },
            'table': function(el, renderer) {
                if (renderer.y > 250){
                    doc.addPage()
                    renderer.y = 10}
                else
                    renderer.y += 10
            false
            }
        };

// All units are in the set measurement for the document
// This can be changed to "pt" (points), "mm" (Default), "cm", "in"
        doc.fromHTML($('#render_me').get(0), 15, 15, {
            'width': 170,
            'elementHandlers': specialElementHandlers
        });

        doc.output('dataurlnewwindow');
        }

</script>
<div id='content'>

    {% include 'admin/menu.phtml' %}
    <table border='1' style='margin: 50px;' id='render_me'>
        <tr>
            <td>ID</td>
            <td>Date</td>
            <td>Confirmed</td>
            <td>Operator</td>
            <td>Customer</td>
        </tr>
        <tr>
            <td><a href='show.php?id={{ ord.id }}'>{{ ord.id }}</a></td>
            <td>{{ ord.data }}</td>
            <td>{{ ord.confirmed }}</td>
            <td>{{ ord.operator }}</td>
            <td>{{ ord.customer }}</td>
        </tr>
        {% for prod in products %}
        <tr>
            <td><a href='../products/show.php?id={{ prod.id }}'>{{ prod.name }}</a></td>
            <td>{{ prod.quantity }}</td>
        </tr>
        {% endfor %}
    </table>
    {% if ord.confirmed != 1%}
    <a href='confirm.php?id={{ ord.id }}'>Conferma ordine</a>
    {% endif %}
    <input type="button" onclick="pdf()" value='lolololololol'>
</div>
{% include 'footer.phtml' %}

{% include 'admin/structure/header.phtml' %}
{% include 'admin/structure/menu.phtml' %}
<script type="text/javascript" src="../../../scripts/jquery.validate.js"></script>
<script type="text/javascript" src="../../../scripts/validation/admin/form.customers.validation.js"></script>
<script type="text/javascript">
$(function (){
    if($('#type').val() === 'user'){
        $('#cf_div').show();
        $('#piva_div').hide();
        
        $('#cod_fis').rules('add', {required: true});
        $('#piva').rules('remove');
    }else{
        $('#cf_div').hide();
        $('#piva_div').show();
        
        $('#cod_fis').rules('remove');
        $('#piva').rules('add', {required: true});
    }
});
function toggleDivs(){
    if($('#type').val() === 'user'){
        $('#cf_div').show();
        $('#piva_div').hide();
        
        resetRequirements();
        $('#cod_fis').rules('add', {required: true});
    } else {
        $('#cf_div').hide();
        $('#piva_div').show();
        
        resetRequirements();
        $('#piva').rules('add', {required: true});
    }
}

function resetRequirements(){
    $('#cod_fis').rules('remove');
    $('#piva').rules('remove');
}
</script>
<div id='content'>
    {{ message }}
    <form action="update.php" method="post" id="formcustomers">
        <input type="hidden" name="id" value="{{ cus.id }}"/>
        <div class="totwidth">
			<div class="panleft1">
				Name:
			</div>
			<div class="panleft2">
				<input type="text" name="name" value="{{ cus.name }}"/>
			</div>
		</div>
		<div class="totwidth">
			<div class="panleft1">
				Surname:
			</div>
			<div class="panleft2">
				<input type="text" name="surname" value="{{ cus.surname }}"/>
			</div>
		</div>
                <div class="totwidth" id="cf_div" style="display: none">
			<div class="panleft1">
				Cod. Fiscale:
			</div>
			<div class="panleft2">
				<input type="text" id="cod_fis" name="cod_fis" value="{{ cus.cod_fis }}"/>
			</div>
		</div>
                <div class="totwidth" id="piva_div" style="display: none">
			<div class="panleft1">
				P.IVA:
			</div>
			<div class="panleft2">
				<input type="text" id="piva" name="piva" value="{{ cus.piva }}"/>
			</div>
		</div>
		<div class="totwidth">
			<div class="panleft1">
				Address:
			</div>
			<div class="panleft2">
				<input type="text" name="address" value="{{ cus.address }}"/>
			</div>
		</div>
		<div class="totwidth">
			<div class="panleft1">
				E-mail:
			</div>
			<div class="panleft2">
				<input type="text" name="email" value="{{ cus.email }}"/>
			</div>
		</div>
		<div class="totwidth">
			<div class="panleft1">
				Telephone:
			</div>
			<div class="panleft2">
				<input type="text" name="telephone" value="{{ cus.telephone }}"/>
			</div>
		</div>
		<div class="totwidth">
			<div class="panleft1">
				Cellphone:
			</div>
			<div class="panleft2">
				<input type="text" name="cellphone" value="{{ cus.cellphone }}"/>
			</div>
		</div>
		<div class="totwidth">
			<div class="panleft1">
				Active:
			</div>
			<div class="panleft2">
				<input type="checkbox" name="active" {{ cus.c_active }}/>
			</div>
		</div>
		<div class="totwidth">
			<div class="panleft1">
				Password:
			</div>
			<div class="panleft2">
				<input type="password" name="password"/>
			</div>
		</div>
		<div class="totwidth">
			<div class="panleft1">
				Operator:
			</div>
			<div class="panleft2">
				<select name="adm_id">
					{% for adm in admins %}
					<option value="{{ adm.id }}" {{ adm.selected }}>{{ adm.name }}</option>
					{% endfor %}
				</select>
			</div>
		</div>
                <div class="totwidth">
			<div class="panleft1">
				Type:
			</div>
			<div class="panleft2">
				<select id="type" name="type" onchange="toggleDivs();">
					<option value="user" {{ cus.selected_u }}>user</option>
					<option value="merchant"  {{ cus.selected_m }}>merchant</option>
					<option value="stockist"  {{ cus.selected_s }}>stockist</option>
				</select>
			</div>
		</div>
                <div class="totwidth">
			<div class="panleft1">
				Price range:
			</div>
			<div class="panleft2">
				<select name="price_range">
					<option value="1" {{ cus.selected_pw }}>wholesale</option>
					<option value="2" {{ cus.selected_pr }}>retail</option>
					<option value="3" {{ cus.selected_ps }}>super</option>
				</select>
			</div>
		</div>
		<input type="submit" value="invio"/>

    </form>
</div>
    {% include 'admin/structure/footer.phtml' %}
